@page
@model DimDim.Web.Pages.Transacoes.IndexModel
@{
    ViewData["Title"] = "Transações";
}
<section class="title">Extrato de Transações</section>
<section class="card">
    <form method="get" style="margin-bottom:12px">
        <div class="row" style="display:flex;align-items:center;gap:12px;padding:10px 12px;">
            <label for="IdConta">Conta</label>
            <input id="IdConta" asp-for="IdConta" type="number" min="1" style="width:120px;padding:8px 10px;border-radius:10px;border:1px solid #ccc;">
            <label for="Take">Take</label>
            <input id="Take" asp-for="Take" type="number" min="1" max="200" style="width:90px;padding:8px 10px;border-radius:10px;border:1px solid #ccc;">
            <label for="Skip">Skip</label>
            <input id="Skip" asp-for="Skip" type="number" min="0" style="width:90px;padding:8px 10px;border-radius:10px;border:1px solid #ccc;">
            <button type="submit" style="padding:10px 16px;border:2px solid var(--accent);border-radius:12px;background:#fff;font-weight:700;cursor:pointer;">Carregar</button>
        </div>
    </form>

    <div style="display:flex;gap:12px;justify-content:flex-end;margin-bottom:16px;">
        <a asp-page="/Transacoes/Depositar" asp-route-idConta="@Model.IdConta" style="padding:10px 16px;border:2px solid var(--accent);border-radius:12px;background:#fff;font-weight:700;text-decoration:none;color:#111;">Depositar</a>
        <a asp-page="/Transacoes/Sacar" asp-route-idConta="@Model.IdConta" style="padding:10px 16px;border:2px solid var(--accent);border-radius:12px;background:#fff;font-weight:700;text-decoration:none;color:#111;">Sacar</a>
        <a asp-page="/Transacoes/Transferir" asp-route-idContaOrigem="@Model.IdConta" style="padding:10px 16px;border:2px solid var(--accent);border-radius:12px;background:#fff;font-weight:700;text-decoration:none;color:#111;">Transferir</a>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th class="th">Tipo</th>
                <th class="th">Valor</th>
                <th class="th">Data/Hora (UTC)</th>
            </tr>
        </thead>
        <tbody>
        @if (Model.IdConta is null || Model.IdConta <= 0)
        {
            for (int i = 0; i < 3; i++)
            {
                <tr><td class="td" colspan="3"><div class="skeleton"></div></td></tr>
            }
            <tr><td class="td" colspan="3">Informe uma conta e clique em Carregar.</td></tr>
        }
        else if (Model.Itens != null && Model.Itens.Count > 0)
        {
            foreach (var t in Model.Itens)
            {
                <tr class="tr">
                    <td class="td">@t.Tipo</td>
                    <td class="td">@t.Valor.ToString("N2")</td>
                    <td class="td">@t.DataHora.ToString("dd/MM/yyyy HH:mm")</td>
                </tr>
            }
        }
        else
        {
            for (int i = 0; i < 3; i++)
            {
                <tr><td class="td" colspan="3"><div class="skeleton"></div></td></tr>
            }
            <tr><td class="td" colspan="3">Sem transações para esta conta.</td></tr>
        }
        </tbody>
    </table>
</section>
